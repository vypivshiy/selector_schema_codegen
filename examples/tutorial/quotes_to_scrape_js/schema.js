// autogenerated by ssc-gen DO NOT_EDIT
/*** Example how to parse json-like data from plain HTML
 *
 * */
/***
 *
 * {
 *     "data": [
 *         {
 *             "tags": "Array<String>",
 *             "author": {
 *                 "name": "String",
 *                 "goodreads_links": "String",
 *                 "slug": "String"
 *             },
 *             "text": "String"
 *         },
 *         "..."
 *     ]
 * }*/
class Main {
    constructor(doc) {
        if (typeof doc === 'string') {
            this._doc = new DOMParser().parseFromString(doc, 'text/html');
        } else if (doc instanceof Document || doc instanceof Element) {
            this._doc = doc;
        } else {
            throw new Error(
                'Invalid input: Expected a Document, Element, or string',
            );
        }
    }

    _parseData(v) {
        let v0 =
            typeof v.outerHTML === 'undefined'
                ? v.documentElement.outerHTML
                : v.outerHTML;
        let v1 = v0.match(/var\s+data\s*=\s*(\[.*\]);\s+for/s)[1];

        return JSON.parse(v1);
    }
    parse() {
        return {
            data: this._parseData(this._doc),
        };
    }
}
