# autogenerated by ssc-gen DO NOT_EDIT

from __future__ import annotations
import sys
from typing import Dict, Union

if sys.version_info >= (3, 10):
    from types import NoneType
else:
    NoneType = type(None)

from parsel import Selector, SelectorList
from parsel.selector import _SelectorType  # noqa

T_ProductDescription = Dict[str, str]


class ProductDescription:
    """parse product description from product page

        Response input examples:
            - https://books.toscrape.com/catalogue/in-her-wake_980/index.html
            - from catalogue page


    {
        "UPC": "String",
        "Product Type": "Books",
        "Price (excl. tax)": "String",
        "Price (incl. tax)": "String",
        "Tax": "String",
        "Availability": "In stock (<count>)",
        "Number of reviews": "0 (always, its fiction shop lol)"
    }"""

    def __init__(self, document: Union[str, _SelectorType]) -> None:
        self._document = (
            Selector(document) if isinstance(document, str) else document
        )

    def _split_doc(self, v: Union[Selector, _SelectorType]) -> SelectorList:
        return v.css("table tr")

    def _parse_key(self, v: Union[Selector, _SelectorType]) -> str:
        v0 = v.css("th")
        return "".join(v0.css("::text").getall())

    def _parse_value(self, v: Union[Selector, _SelectorType]) -> str:
        v0 = v.css("td")
        return "".join(v0.css("::text").getall())

    def parse(self) -> T_ProductDescription:
        return {
            self._parse_key(el): self._parse_value(el)
            for el in self._split_doc(self._document)
        }
